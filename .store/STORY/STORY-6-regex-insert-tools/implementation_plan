1. Build low-level helpers in rb-tools.el that locate the canonical match for a regex: limit to the occurrence closest to an anchor line (user-supplied) or the only match, capture its line number, and provide the adjacent insertion point (before/after). Ensure the helpers work on the raw file text and report an error if the regex is ambiguous or absent. Document that the regex flavor matches ripgrep's default (Rust) so callers can write compatible expressions.
2. Implement insert_after_regex and insert_before_regex as GPTel tools using those helpers. Each tool should open the file in a temporary buffer, perform the insertion with precise newline handling, and—when the :validate flag is true—run the buffer through Tree-sitter parsing before writing the change back. The tools should raise error on missing matches, ambiguous occurrences, mismatched validation, or other failure modes rather than silently misapplying edits.
3. Write ERT coverage / regression tests that exercise both tools in rb-tools-test.el: success cases (insert before/after a unique marker, selecting correct match when multiple occurrences exist, and verifying the chosen regex syntax is compatible with ripgrep default mode) and failure cases (missing regex, ambiguous target, validation failure). Document the new tools next to the existing GPTel helper listings so authors know how to use them and how :line and :validate behave.