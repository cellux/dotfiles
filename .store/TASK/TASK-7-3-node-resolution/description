Cover `rb-ts--resolve-node`, `rb-ts-update-nodes`, and `rb-ts--insert-relative` via ERT tests. Use fixtures with multiple top-level nodes to verify selectors by line and hash, ambiguous hash detection, formatting toggles, dry-run reports, and parse validation when inserted text introduces errors. Include tests for `rb-ts-insert-before-node` and `rb-ts-insert-after-node` covering skip-format, parse errors, missing selectors, and ensuring original file content is preserved on failure. Make sure Tree-sitter readiness is checked before running any tests that require actual parsing.